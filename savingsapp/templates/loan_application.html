{% extends "base.html" %}

{% block title %} Savings-Home {% endblock title %}

{% block stylesheets %}
    {{ block.super }}
{% endblock stylesheets %}

{% block content %}
{% load crispy_forms_tags %}
{% load humanize %}
    <section class="hero-area">
        <div class="container">
            <p><a href="{% url 'index' %}">Home</a> / Loan Application</p>
            <div class="row">
                <div class="col-lg-7">
                    <h2><b>Loan Legibility </b></h2>
                    <table id="data-table" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                        <thead>
                        <tr style="font-weight: bolder;">
                            <td>Name</td>
                            <td>Total Savings <b>{{total_amount|intcomma}} </b></td>
                            <td>Maximum Loan Amount</td>
                        </tr>
                        </thead>
                        <tbody>
                        
                        {% for member in all_members %}
                            <tr>
                                <td>{{member.full_name}}</td>
                                <td>{{member.total_saving|intcomma}}</td>
                                <td>{{member.maximum_loan_amount|intcomma}}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            
                <div class="col-lg-4">
                    <h2><b> Loan Application Form</b></h2>
                    <!--form area-->
                    <form action="#" method="POST">
                    {% csrf_token %}
                        <div class="form-group">
                            <label for="date">Date:</label>
                            <input type="date" class="form-control" id="date" name="date" >
                        </div>
                        {{form.name|as_crispy_field}}
                        <div class="form-group">
                            <label for="amount">Amount(Principal):</label>
                            <input type="number" class="form-control" id="amount" name="amount">
                        </div>
                        <div class="form-group">
                            <label for="rate">Interest Rate:</label>
                            <input type="number" class="form-control" id="interest_rate" name="interest_rate" value={{rate}}>
                        </div>
                        <div class="form-group">
                            <label for="loan_period">Loan Period(Number of Months):</label>
                            <input type="number" class="form-control" id="loan_period" name="loan_period" value=45 readonly="True">
                        </div>
                        
                        <div class="form-group" id="cycle">
                            <label for="cycle">Cycle:</label>
                            <input type="text" class="form-control" readonly="True"  name="cycle" id="cycle" value="{{current_cycle}}">
                        </div>

                        <div class="form-group">
                            <label for="recorded_by">Recorded by:</label>
                            <input type="text" class="form-control" id="recorded_by" readonly="True" name="recorded_by" value="logged in user">
                        </div>
                        {{form.loan_status|as_crispy_field }}
                        <button type="submit" class="btn btn-primary" >Submit</button>
                    </form>
                </div>
            </div>
        </div>        
    </section>
    <script type="text/javascript">

    </script>

    {% endblock content %}

    {% block javascripts %}
        {{ block.super }}
    {% endblock javascripts %}
