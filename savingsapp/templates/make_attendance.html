{% extends "base.html" %}

{% block title %} Savings-Home {% endblock title %}

{% block stylesheets %}
    {{ block.super }}
{% endblock stylesheets %}

{% block content %}
      <div class="container">
          <p><a href="{% url 'index'%}">Home</a> / Attendance</p>
           <h3>Record Members' Attendance</h3>

          <form  method="POST" enctype="multipart/form-data" >
              {% load crispy_forms_tags %}
              {{ formset.management_form }}
              {% csrf_token %}
                <table id="data-table" class="table table-striped table-bordered dt-responsive nowrap" cellspacing="0" width="100%">
                  <div class="col-lg-4 form-group">
                      <label for="date">Date:</label>
                      <input type="date" name="date" class="form-control" id="date" required="*" >
                  </div>
                    <thead>
                      <tr style="font-weight: bolder;">
                        <td>Name</td>
                        <td>Attendance</td>
                        <td>Social fund</td>
                      </tr>
                    </thead>
                    <tbody>
                      {% for member in all_members %}

                        <tr>
                            <td>{{member.id}}</td>
                            <td>{{member.full_name}}<input type="hidden" id="full_name" name="full_name" value="{{member.full_name}}"></td>
                            <td id="Status">{{formset.status}}</td>
                            <td id="Social">{{formset.social_fund}}</td>

                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <button type="submit" class="btn btn-primary" >Submit</button>
            </form>
        </div>
        <script type="text/javascript">
            $("#Status").change(function () {
            if ($(this).val() === "Absent") {
                $('#Social').hide();

            } else {
                $('#Social').show();
            }
        });
        $("#id_status").trigger("change");
        </script>
        {% endblock content %}
